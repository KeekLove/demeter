{"remainingRequest":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_babel-loader@8.0.6@babel-loader\\lib\\index.js!C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_eslint-loader@2.2.1@eslint-loader\\index.js??ref--13-0!C:\\Users\\ZJM\\Desktop\\cloudpanel\\src\\main.js","dependencies":[{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\src\\main.js","mtime":1564036771295},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_babel-loader@8.0.6@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_eslint-loader@2.2.1@eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"C:\\\\Users\\\\ZJM\\\\Desktop\\\\cloudpanel\\\\node_modules\\\\_core-js@2.6.9@core-js\\\\modules\\\\es6.array.iterator.js\";\nimport \"C:\\\\Users\\\\ZJM\\\\Desktop\\\\cloudpanel\\\\node_modules\\\\_core-js@2.6.9@core-js\\\\modules\\\\es6.promise.js\";\nimport \"C:\\\\Users\\\\ZJM\\\\Desktop\\\\cloudpanel\\\\node_modules\\\\_core-js@2.6.9@core-js\\\\modules\\\\es6.object.assign.js\";\nimport \"C:\\\\Users\\\\ZJM\\\\Desktop\\\\cloudpanel\\\\node_modules\\\\_core-js@2.6.9@core-js\\\\modules\\\\es7.promise.finally.js\";\n// =========================================================\n// * Vue Material Dashboard - v1.2.1\n// =========================================================\n//\n// * Product Page: https://www.creative-tim.com/product/vue-material-dashboard\n// * Copyright 2019 Creative Tim (https://www.creative-tim.com)\n// * Licensed under MIT (https://github.com/creativetimofficial/vue-material-dashboard/blob/master/LICENSE.md)\n//\n// * Coded by Creative Tim\n//\n// =========================================================\n//\n// * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport App from \"./App\";\nimport store from \"./store\";\nimport axios from 'axios';\nVue.prototype.$axios = axios; // router setup\n\nimport routes from \"./routes/routes\"; // Plugins\n\nimport GlobalComponents from \"./globalComponents\";\nimport GlobalDirectives from \"./globalDirectives\";\nimport Notifications from \"./components/NotificationPlugin\"; // MaterialDashboard plugin\n\nimport MaterialDashboard from \"./material-dashboard\";\nimport Chartist from \"chartist\"; // configure router\n\nvar router = new VueRouter({\n  routes: routes,\n  // short for routes: routes\n  linkExactActiveClass: \"nav-item active\"\n});\nrouter.beforeEach(function (to, from, next) {\n  var userInfo = JSON.parse(window.localStorage.getItem('account'));\n  console.log(userInfo); // userInfo不为空，expire未过期时。state.token为空时 设置token\n\n  if (userInfo != null && store.state.token == null && userInfo.expire > new Date().getTime()) {\n    var params = new URLSearchParams();\n    params.append('username', userInfo.username);\n    params.append('password', userInfo.password); //ajax请求\n\n    axios.post(\"api/operationArea/login\", params).then(function (res) {\n      //更新过期时间\n      var ONE_DAY = 86400000;\n      var time = new Date().getTime();\n      userInfo.expire = new Date().setTime(time + ONE_DAY * 10);\n      window.localStorage.setItem('account', JSON.stringify(userInfo)); //往Vuex存入token\n\n      store.commit('saveToken', res.data.token);\n      store.commit('savePrivilege', res.data.privilege);\n      console.log(store.state.token);\n      router.push(\"dashboard\");\n    });\n  }\n\n  if (to.meta.requireToken) {\n    if (store.state.token == null) {\n      next({\n        path: \"/login\"\n      });\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n});\nVue.prototype.$Chartist = Chartist;\nVue.use(VueRouter);\nVue.use(MaterialDashboard);\nVue.use(GlobalComponents);\nVue.use(GlobalDirectives);\nVue.use(Notifications);\n/* eslint-disable no-new */\n\nnew Vue({\n  el: \"#app\",\n  render: function render(h) {\n    return h(App);\n  },\n  router: router,\n  store: store,\n  data: {\n    Chartist: Chartist\n  }\n});",{"version":3,"sources":["C:\\Users\\ZJM\\Desktop\\cloudpanel\\src\\main.js"],"names":["Vue","VueRouter","App","store","axios","prototype","$axios","routes","GlobalComponents","GlobalDirectives","Notifications","MaterialDashboard","Chartist","router","linkExactActiveClass","beforeEach","to","from","next","userInfo","JSON","parse","window","localStorage","getItem","console","log","state","token","expire","Date","getTime","params","URLSearchParams","append","username","password","post","then","res","ONE_DAY","time","setTime","setItem","stringify","commit","data","privilege","push","meta","requireToken","path","$Chartist","use","el","render","h"],"mappings":"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","sourcesContent":["// =========================================================\n// * Vue Material Dashboard - v1.2.1\n// =========================================================\n//\n// * Product Page: https://www.creative-tim.com/product/vue-material-dashboard\n// * Copyright 2019 Creative Tim (https://www.creative-tim.com)\n// * Licensed under MIT (https://github.com/creativetimofficial/vue-material-dashboard/blob/master/LICENSE.md)\n//\n// * Coded by Creative Tim\n//\n// =========================================================\n//\n// * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport App from \"./App\";\nimport store from \"./store\";\nimport axios from 'axios';\nVue.prototype.$axios = axios;\n\n// router setup\nimport routes from \"./routes/routes\";\n\n// Plugins\nimport GlobalComponents from \"./globalComponents\";\nimport GlobalDirectives from \"./globalDirectives\";\nimport Notifications from \"./components/NotificationPlugin\";\n\n// MaterialDashboard plugin\nimport MaterialDashboard from \"./material-dashboard\";\n\nimport Chartist from \"chartist\";\n\n// configure router\nconst router = new VueRouter({\n  routes, // short for routes: routes\n  linkExactActiveClass: \"nav-item active\",\n});\n\nrouter.beforeEach((to, from, next) => {\n  const userInfo = JSON.parse(window.localStorage.getItem('account'));\n  console.log(userInfo);\n\n  // userInfo不为空，expire未过期时。state.token为空时 设置token\n  if (userInfo != null && store.state.token == null && userInfo.expire>new Date().getTime()){\n    const params = new URLSearchParams();\n    params.append('username',userInfo.username);\n    params.append('password',userInfo.password);\n    //ajax请求\n    axios.post(\"api/operationArea/login\",params).then(res=>{\n      //更新过期时间\n      const ONE_DAY = 86400000;\n      const time = new Date().getTime();\n      userInfo.expire = new Date().setTime(time+ONE_DAY*10);\n      window.localStorage.setItem('account',JSON.stringify(userInfo))\n      //往Vuex存入token\n      store.commit('saveToken',res.data.token);\n      store.commit('savePrivilege',res.data.privilege);\n      console.log(store.state.token);\n      router.push(\"dashboard\");\n    });\n\n  }\n\n  if (to.meta.requireToken){\n    if (store.state.token == null){\n      next({path:\"/login\"});\n    }else {\n      next();\n    }\n  }else {\n    next();\n  }\n})\n\nVue.prototype.$Chartist = Chartist;\n\nVue.use(VueRouter);\nVue.use(MaterialDashboard);\nVue.use(GlobalComponents);\nVue.use(GlobalDirectives);\nVue.use(Notifications);\n\n/* eslint-disable no-new */\nnew Vue({\n  el: \"#app\",\n  render: h => h(App),\n  router,\n  store,\n  data: {\n    Chartist: Chartist\n  }\n});\n"]}]}