{"remainingRequest":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_vue-loader@15.7.1@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ZJM\\Desktop\\cloudpanel\\src\\pages\\UserProfile.vue?vue&type=style&index=0&id=684be52c&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\src\\pages\\UserProfile.vue","mtime":1564073758081},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_css-loader@1.0.1@css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_vue-loader@15.7.1@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_sass-loader@7.1.0@sass-loader\\lib\\loader.js","mtime":1533139052000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_vue-loader@15.7.1@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.md-radio {\n  display: flex;\n}\n",{"version":3,"sources":["UserProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoMA;AACA;AACA","file":"UserProfile.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"md-layout\">\n      <div\n              class=\"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100\"\n      >\n        <md-card>\n          <md-card-header data-background-color=\"green\">\n            <h4 class=\"title\">所有餐馆</h4>\n            <p class=\"category\">包含有效和无效餐馆</p>\n          </md-card-header>\n          <md-card-content>\n            <md-table v-model=\"userList.list\">\n              <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\">\n                <md-table-cell  md-label=\"用户ID\">{{ item.id }}</md-table-cell>\n                <md-table-cell md-label=\"用户名\">{{ item.username }}</md-table-cell>\n                <md-table-cell md-label=\"密码\">{{ item.password }}</md-table-cell>\n                <md-table-cell md-label=\"权限等级\">{{item.privilege}}</md-table-cell>\n                <md-table-cell md-label=\"更新时间\">{{new Date(item.updateTime).toLocaleDateString()}}</md-table-cell>\n                <md-button @click=\"selectUser(item)\">选择</md-button>\n              </md-table-row>\n            </md-table>\n          </md-card-content>\n          <md-card-actions class=\"md-layout\">\n            <md-button class=\"md-info disabled\">页码：{{userList.pageNum}}</md-button>\n            <md-button class=\"md-layout-item md-size-49 md-warning\" v-if=\"userList.pageNum != 1\" @click=\"prePage\">上一页</md-button>\n            <md-button class=\"md-layout-item md-size-49 md-primary\" v-if=\"userList.hasNextPage\" @click=\"nextPage\">下一页</md-button>\n          </md-card-actions>\n        </md-card>\n      </div>\n\n      <form class=\"md-layout-item md-size-100\" v-if=\"update ==1\">\n        <md-card>\n          <md-card-header :data-background-color=\"green\">\n            <h4 class=\"title\">更新管理员信息</h4>\n            <p class=\"category\">已选择{{username}}</p>\n          </md-card-header>\n          <md-card-content>\n            <div class=\"md-layout\">\n              <div class=\"md-layout-item md-small-size-100 md-size-33\">\n                <md-field>\n                  <label>用户ID</label>\n                  <md-input v-model=\"userId\" disabled></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-small-size-100 md-size-33\">\n                <md-field>\n                  <label>用户名</label>\n                  <md-input v-model=\"username\"></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-small-size-100 md-size-33\">\n                <md-field>\n                  <label>密码</label>\n                  <md-input v-model=\"password\"></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-small-size-100 md-size-100\">\n                  <md-radio v-model=\"privilege\" value=\"1\">超级管理员</md-radio>\n                  <md-radio v-model=\"privilege\" value=\"2\" class=\"md-primary\">普通管理员</md-radio>\n              </div>\n              <md-button @click=\"updateUser\">提交</md-button>\n            </div>\n          </md-card-content>\n        </md-card>\n      </form>\n      <md-button @click=\"add = 1\">添加用户</md-button>\n      <form class=\"md-layout-item md-size-100\" v-if=\"add == 1\">\n        <md-card>\n          <md-card-header :data-background-color=\"green\">\n            <h4 class=\"title\">添加管理员</h4>\n            <p class=\"category\">填写账号密码和等级</p>\n          </md-card-header>\n          <md-card-content>\n            <div class=\"md-layout\">\n              <div class=\"md-layout-item md-small-size-100 md-size-33\">\n                <md-field>\n                  <label>用户名</label>\n                  <md-input v-model=\"username\"></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-small-size-100 md-size-33\">\n                <md-field>\n                  <label>密码</label>\n                  <md-input v-model=\"password\"></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-small-size-100 md-size-100\">\n                <md-radio v-model=\"privilege\" value=\"1\">超级管理员</md-radio>\n                <md-radio v-model=\"privilege\" value=\"2\" class=\"md-primary\">普通管理员</md-radio>\n              </div>\n              <md-button @click=\"addUser\">添加</md-button>\n            </div>\n          </md-card-content>\n        </md-card>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { EditProfileForm, UserCard } from \"@/pages\";\n\nexport default {\n  components: {\n    EditProfileForm,\n    UserCard\n  },\n  methods:{\n    nextPage(){\n      console.log(\"---\");\n      console.log(this.userList)\n      console.log(\"---\");\n      console.log(this.userList.nextPage);\n      this.changePage(this.userList.nextPage);\n    },\n    prePage(){\n      console.log(this.userList.prePage);\n      this.changePage(this.userList.prePage)\n    },\n    changePage(pageNum){\n      this.$axios.get(\"api/Managers/page\",{\n        params:{\n          token:'',\n          pageNum:pageNum,\n        }}).then(res=>{\n        console.log(res.data);\n        this.userList = res.data\n      })\n    },\n\n    selectUser(user){\n      console.log(user);\n      this.update = 1;\n      this.username = user.username;\n      this.password = user.password;\n      this.privilege = user.privilege+\"\";\n      this.userId = user.id;\n    },\n    updateUser(){\n      // this.username,this.password,this.privilege,this.userId\n      const _this = this;\n      const id = this.userId;\n      const name = this.username;\n      const pwd = this.password;\n      const level = this.privilege;\n      console.log(id+name+pwd+level);\n      this.$axios.put(\"api/Managers/manager?token&id=\"+id+\"&username=\"+name+\"&password=\"+pwd+\"&privilege=\"+level).then(res=>{\n        console.log(res.data);\n        _this.changePage(_this.userList.pageNum)\n        _this.username = null;\n        _this.password = null;\n        _this.privilege = null;\n        _this.userId = null;\n        _this.update = 0;\n      })\n    },\n\n    addUser(){\n      const params = new URLSearchParams;\n      params.append(\"username\",this.username);\n      params.append(\"password\",this.password);\n      params.append(\"privilege\",this.privilege);\n      params.append(\"token\",\"\")\n\n      this.$axios.post(\"api/Managers/manager\",params).then(res=>{\n        console.log(res.data);\n      })\n    }\n  },\n  data(){\n    return{\n      userList:null,\n      userId:null,\n      password:null,\n      username:null,\n      privilege:\"1\",\n\n      add:0,\n      update:0\n    }\n  },\n  mounted() {\n    this.$axios.get(\"api/Managers/page\",{\n        params:{\n          token:'',\n          pageNum:1\n      }}).then(res=>{\n      console.log(res.data);\n      this.userList = res.data\n    })\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  .md-radio {\n    display: flex;\n  }\n</style>"]}]}