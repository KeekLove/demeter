{"remainingRequest":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_vue-loader@15.7.1@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ZJM\\Desktop\\cloudpanel\\src\\pages\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\src\\pages\\Login.vue","mtime":1564075606945},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_babel-loader@8.0.6@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_vue-loader@15.7.1@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  methods: {\n    login(){\n      const username = this.username;\n      const password = this.password;\n      const _store = this.$store\n      const router = this.$router;\n      console.log(username);\n      console.log(password);\n      if (this.password !=null || this.password!=''){\n        //start 设置以post方式传参时的参数\n        const params = new URLSearchParams;\n        params.append(\"username\",username);\n        params.append(\"password\",password);\n        //end\n\n        //ajax请求\n        this.$axios.post(\"api/operationArea/login\",params).then(res=>{\n          //以字符串方式存入账号到localStorage，并设置过期时间，取出时用JSON.parse()\n          const ONE_DAY = 86400000;\n          const time = new Date().getTime();\n          const account = {\"username\":username,\"password\":password,\"expire\":new Date().setTime(time+ONE_DAY*10)};\n          window.localStorage.setItem(\"account\",JSON.stringify(account))\n          console.log(account);\n\n          //往Vuex存入token\n          _store.commit('saveToken',res.data.token);\n          _store.commit('savePrivilege',res.data.privilege);\n          router.push(\"/dashboard\");\n        })\n      }\n    },\n    logOut(){\n      window.localStorage.setItem(\"account\",null);\n      window.location.reload();\n    }\n  },\n  data(){\n    return{\n      dataBackgroundColor:'green',\n      username:null,\n      password:null\n    };\n  },\n  mounted() {\n  }\n};\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <div class=\"md-layout\" style=\"margin: 0 auto;\">\n      <form class=\"md-layout-item md-size-50 md-small-size-100\" v-if=\"this.$store.state.token == null\">\n        <md-card>\n          <md-card-header :data-background-color=\"dataBackgroundColor\">\n            <h4 class=\"title\">Edit Profile</h4>\n            <p class=\"category\">Complete your profile</p>\n          </md-card-header>\n\n          <md-card-content>\n            <div class=\"md-layout\">\n              <div class=\"md-layout-item md-size-100\">\n                <md-field>\n                  <label>User Name</label>\n                  <md-input v-model=\"username\" type=\"text\"></md-input>\n                </md-field>\n              </div>\n              <div class=\"md-layout-item md-size-100\">\n                <md-field>\n                  <label>Password</label>\n                  <md-input v-model=\"password\" type=\"password\"></md-input>\n                </md-field>\n              </div>\n            </div>\n            <md-button class=\"md-success md-rised\" @click=\"login\">提交</md-button>\n          </md-card-content>\n        </md-card>\n      </form>\n      <md-button @click=\"logOut\" v-if=\"this.$store.state.token\">登出</md-button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  methods: {\n    login(){\n      const username = this.username;\n      const password = this.password;\n      const _store = this.$store\n      const router = this.$router;\n      console.log(username);\n      console.log(password);\n      if (this.password !=null || this.password!=''){\n        //start 设置以post方式传参时的参数\n        const params = new URLSearchParams;\n        params.append(\"username\",username);\n        params.append(\"password\",password);\n        //end\n\n        //ajax请求\n        this.$axios.post(\"api/operationArea/login\",params).then(res=>{\n          //以字符串方式存入账号到localStorage，并设置过期时间，取出时用JSON.parse()\n          const ONE_DAY = 86400000;\n          const time = new Date().getTime();\n          const account = {\"username\":username,\"password\":password,\"expire\":new Date().setTime(time+ONE_DAY*10)};\n          window.localStorage.setItem(\"account\",JSON.stringify(account))\n          console.log(account);\n\n          //往Vuex存入token\n          _store.commit('saveToken',res.data.token);\n          _store.commit('savePrivilege',res.data.privilege);\n          router.push(\"/dashboard\");\n        })\n      }\n    },\n    logOut(){\n      window.localStorage.setItem(\"account\",null);\n      window.location.reload();\n    }\n  },\n  data(){\n    return{\n      dataBackgroundColor:'green',\n      username:null,\n      password:null\n    };\n  },\n  mounted() {\n  }\n};\n</script>\n"]}]}