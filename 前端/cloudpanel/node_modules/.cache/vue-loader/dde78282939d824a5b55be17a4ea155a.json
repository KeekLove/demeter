{"remainingRequest":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_vue-loader@15.7.1@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ZJM\\Desktop\\cloudpanel\\src\\pages\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\src\\pages\\Dashboard.vue","mtime":1564123977113},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_babel-loader@8.0.6@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ZJM\\Desktop\\cloudpanel\\node_modules\\_vue-loader@15.7.1@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  StatsCard,\n  ChartCard,\n  NavTabsCard,\n  NavTabsTable,\n  OrderedTable\n} from \"@/components\";\n\nexport default {\n  components: {\n    StatsCard,\n    ChartCard,\n    NavTabsCard,\n    NavTabsTable,\n    OrderedTable\n  },\n  methods:{\n    nextOrderList(){\n      this.changeOrderList(this.orderList.nextPage)\n      this.aimedRes = 0;\n    },\n    prevOrderList(){\n      this.changeOrderList(this.orderList.prePage)\n      this.aimedRes = 0;\n    },\n    changeOrderList(pageNum){\n      const token = this.$store.state.token;\n      this.$axios.get(\"api/operationArea/packagesPage\",{\n        params: {\n          token:token,\n          pageNum:pageNum\n        }\n      }).then(res=>{\n        console.log(res.data);\n        this.order = res.data.list;\n        this.orderList = res.data;\n      })\n    },\n\n    nextResList(){\n      this.changeResList(this.resList.nextPage)\n      this.aimedRes = 0;\n    },\n    preResList(){\n      this.changeResList(this.resList.prePage)\n      this.aimedRes = 0;\n    },\n    changeResList(pageNum){\n      const token = this.$store.state.token;\n      this.$axios.get(\"api/operationArea/restaurantsPage\",{\n        params: {\n          token:token,\n          pageNum:pageNum\n        }\n      }).then(res=>{\n        console.log(res.data);\n        this.resList = res.data;\n      })\n    },\n\n    selectRes(id,card){\n      this.aimedRes = id;\n      this.isActivate = card == null ? '此餐厅无授权码' : '此餐厅有激活码';\n    },\n    genCard(){\n      this.$axios.put(\"api/operationArea/codeCard?token=\"+this.$store.state.token+\"&resId=\"+this.aimedRes).then(res=>{\n        if (res.data.affected>0){\n          /**\n           * TODO 弹出通知\n           */\n          console.log(res.data);\n          this.isActivate = \"此餐厅有授权码\"\n        }\n      })\n    },\n    freeze(){\n      const token = this.$store.state.token;\n      this.$axios.put(\"api/operationArea/nonCode?token=\"+this.$store.state.token+\"&resId=\"+this.aimedRes).then(res=>{\n        if (res.data.affected>0){\n          /**\n           * TODO 弹出通知\n           */\n          console.log(res.data);\n          this.isActivate = \"此餐厅无授权码\"\n          //更新列表\n          this.$axios.get(\"api/operationArea/restaurantsPage\",{\n            params: {\n              token:token,\n              pageNum:1\n            }\n          }).then(res=>{\n            console.log(res.data)\n            this.resList = res.data\n          })\n        }\n      })\n    },\n    updateDate(){\n      const token = this.$store.state.token;\n      const date = this.selectedDate.toISOString().substr(0,10)\n      console.log(token);\n      console.log(this.aimedRes)\n      this.$axios.put(\"api/operationArea/newDate?token=\"+this.$store.state.token+\"&resId=\"+this.aimedRes+\"&date=\"+date).then(res=>{\n        if (res.data.affected>0){\n          /**\n           * TODO 弹出通知\n           */\n          console.log(res.data);\n          /**\n           * TODO 更新列表\n           */\n        }\n      })\n    }\n  },\n  mounted() {\n    const token = this.$store.state.token;\n    this.$axios.get(\"api/operationArea/packagesPage\",{\n      params: {\n        token:token,\n        pageNum:1\n      }\n    }).then(res=>{\n      console.log(res.data);\n      this.order = res.data.list;\n      this.orderList = res.data;\n    })\n\n    this.$axios.get(\"api/operationArea/restaurantsPage\",{\n      params: {\n        token:token,\n        pageNum:1\n      }\n    }).then(res=>{\n      console.log(res.data)\n      this.resList = res.data\n    })\n\n  }\n  ,\n  data() {\n    return {\n      orderList:{},\n      order: [],\n\n      resList:{},\n\n      selectedDate:null,\n      aimedRes:0,\n      isActivate:'',\n    };\n  }\n};\n",{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"md-layout\">\n      <div\n        class=\"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100\"\n      >\n        <md-card>\n          <md-card-header data-background-color=\"green\">\n            <h4 class=\"title\">所有订单</h4>\n            <p class=\"category\">已完成的订单</p>\n          </md-card-header>\n          <md-card-content>\n              <md-table v-model=\"order\">\n                <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\">\n                  <md-table-cell md-label=\"订单号\">{{ item.orderId }}</md-table-cell>\n                  <md-table-cell md-label=\"用户电话\">{{ item.phone }}</md-table-cell>\n                  <md-table-cell md-label=\"激活天数\">{{ item.avticeNum }}</md-table-cell>\n                  <md-table-cell md-label=\"价格\">{{ item.prize }}</md-table-cell>\n                  <md-table-cell md-label=\"餐馆ID\">{{ item.restaurantId }}</md-table-cell>\n                  <md-table-cell md-label=\"餐馆名\">{{item.restaurantName}}</md-table-cell>\n                  <md-table-cell md-label=\"更新时间\">{{new Date(item.updateTime).toLocaleDateString()}}</md-table-cell>\n                </md-table-row>\n              </md-table>\n          </md-card-content>\n          <md-card-actions class=\"md-layout\">\n            <md-button class=\"md-info disabled\">页码：{{orderList.pageNum}}</md-button>\n            <md-button class=\"md-layout-item md-size-49 md-warning\" v-if=\"orderList.pageNum != 1\" @click=\"prevOrderList\">上一页</md-button>\n            <md-button class=\"md-layout-item md-size-49 md-primary\" v-if=\"orderList.hasNextPage\" @click=\"nextOrderList\">下一页</md-button>\n          </md-card-actions>\n        </md-card>\n      </div>\n      <div\n              class=\"md-layout-item md-medium-size-100 md-xsmall-size-100 md-size-100\"\n      >\n        <md-card>\n          <md-card-header data-background-color=\"green\">\n            <h4 class=\"title\">所有餐馆</h4>\n            <p class=\"category\">包含有效和无效餐馆</p>\n          </md-card-header>\n          <md-card-content>\n            <md-table v-model=\"resList.list\">\n              <md-table-row slot=\"md-table-row\" slot-scope=\"{ item }\" @click=\"alert(id)\">\n                <md-table-cell  md-label=\"餐馆ID\">{{ item.id }}</md-table-cell>\n                <md-table-cell md-label=\"餐馆图标\">{{ item.icon }}</md-table-cell>\n                <md-table-cell md-label=\"营业执照\">{{ item.registerId }}</md-table-cell>\n                <md-table-cell md-label=\"餐馆名\">{{item.name}}</md-table-cell>\n                <md-table-cell md-label=\"用户电话\">{{ item.phone }}</md-table-cell>\n                <md-table-cell md-label=\"关于\">{{ item.about }}</md-table-cell>\n                <md-table-cell md-label=\"省\">{{ item.province }}</md-table-cell>\n                <md-table-cell md-label=\"城市\">{{ item.city }}</md-table-cell>\n                <md-table-cell md-label=\"街道\">{{ item.address }}</md-table-cell>\n                <md-table-cell md-label=\"失败理由\">{{ item.failReason }}</md-table-cell>\n                <md-table-cell md-label=\"更新时间\">{{new Date(item.updateTime).toLocaleDateString()}}</md-table-cell>\n                <md-button @click=\"selectRes(item.id,item.card)\">选择</md-button>\n              </md-table-row>\n            </md-table>\n          </md-card-content>\n          <md-card-actions class=\"md-layout\">\n            <md-button class=\"md-info disabled\">页码：{{orderList.pageNum}}</md-button>\n            <md-button class=\"md-layout-item md-size-49 md-warning\" v-if=\"resList.pageNum != 1\" @click=\"preResList\">上一页</md-button>\n            <md-button class=\"md-layout-item md-size-49 md-primary\" v-if=\"resList.hasNextPage\" @click=\"nextResList\">下一页</md-button>\n          </md-card-actions>\n        </md-card>\n      </div>\n      <form class=\"md-layout-item md-size-100\">\n        <md-card>\n          <md-card-header :data-background-color=\"dataBackgroundColor\">\n            <h4 class=\"title\">更新餐馆信息</h4>\n            <p class=\"category\">已选择{{aimedRes}}号餐厅</p>\n          </md-card-header>\n\n          <md-card-content>\n            <div class=\"md-layout\" v-if=\"aimedRes>0\">\n              <div class=\"md-layout-item md-small-size-100 md-size-100\">\n                <md-label>修改授权码截止日期</md-label>\n                <md-datepicker v-model=\"selectedDate\"/>\n                <md-button @click=\"updateDate\">确定修改日期</md-button>\n              </div>\n              <div class=\"md-layout-item md-small-size-100 md-size-50\">\n                <md-label>{{isActivate}}</md-label>\n                <br>\n                <md-button @click=\"genCard\">生成授权码</md-button>\n                <md-button @click=\"freeze\">冻结授权码</md-button>\n              </div>\n            </div>\n          </md-card-content>\n        </md-card>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  StatsCard,\n  ChartCard,\n  NavTabsCard,\n  NavTabsTable,\n  OrderedTable\n} from \"@/components\";\n\nexport default {\n  components: {\n    StatsCard,\n    ChartCard,\n    NavTabsCard,\n    NavTabsTable,\n    OrderedTable\n  },\n  methods:{\n    nextOrderList(){\n      this.changeOrderList(this.orderList.nextPage)\n      this.aimedRes = 0;\n    },\n    prevOrderList(){\n      this.changeOrderList(this.orderList.prePage)\n      this.aimedRes = 0;\n    },\n    changeOrderList(pageNum){\n      const token = this.$store.state.token;\n      this.$axios.get(\"api/operationArea/packagesPage\",{\n        params: {\n          token:token,\n          pageNum:pageNum\n        }\n      }).then(res=>{\n        console.log(res.data);\n        this.order = res.data.list;\n        this.orderList = res.data;\n      })\n    },\n\n    nextResList(){\n      this.changeResList(this.resList.nextPage)\n      this.aimedRes = 0;\n    },\n    preResList(){\n      this.changeResList(this.resList.prePage)\n      this.aimedRes = 0;\n    },\n    changeResList(pageNum){\n      const token = this.$store.state.token;\n      this.$axios.get(\"api/operationArea/restaurantsPage\",{\n        params: {\n          token:token,\n          pageNum:pageNum\n        }\n      }).then(res=>{\n        console.log(res.data);\n        this.resList = res.data;\n      })\n    },\n\n    selectRes(id,card){\n      this.aimedRes = id;\n      this.isActivate = card == null ? '此餐厅无授权码' : '此餐厅有激活码';\n    },\n    genCard(){\n      this.$axios.put(\"api/operationArea/codeCard?token=\"+this.$store.state.token+\"&resId=\"+this.aimedRes).then(res=>{\n        if (res.data.affected>0){\n          /**\n           * TODO 弹出通知\n           */\n          console.log(res.data);\n          this.isActivate = \"此餐厅有授权码\"\n        }\n      })\n    },\n    freeze(){\n      const token = this.$store.state.token;\n      this.$axios.put(\"api/operationArea/nonCode?token=\"+this.$store.state.token+\"&resId=\"+this.aimedRes).then(res=>{\n        if (res.data.affected>0){\n          /**\n           * TODO 弹出通知\n           */\n          console.log(res.data);\n          this.isActivate = \"此餐厅无授权码\"\n          //更新列表\n          this.$axios.get(\"api/operationArea/restaurantsPage\",{\n            params: {\n              token:token,\n              pageNum:1\n            }\n          }).then(res=>{\n            console.log(res.data)\n            this.resList = res.data\n          })\n        }\n      })\n    },\n    updateDate(){\n      const token = this.$store.state.token;\n      const date = this.selectedDate.toISOString().substr(0,10)\n      console.log(token);\n      console.log(this.aimedRes)\n      this.$axios.put(\"api/operationArea/newDate?token=\"+this.$store.state.token+\"&resId=\"+this.aimedRes+\"&date=\"+date).then(res=>{\n        if (res.data.affected>0){\n          /**\n           * TODO 弹出通知\n           */\n          console.log(res.data);\n          /**\n           * TODO 更新列表\n           */\n        }\n      })\n    }\n  },\n  mounted() {\n    const token = this.$store.state.token;\n    this.$axios.get(\"api/operationArea/packagesPage\",{\n      params: {\n        token:token,\n        pageNum:1\n      }\n    }).then(res=>{\n      console.log(res.data);\n      this.order = res.data.list;\n      this.orderList = res.data;\n    })\n\n    this.$axios.get(\"api/operationArea/restaurantsPage\",{\n      params: {\n        token:token,\n        pageNum:1\n      }\n    }).then(res=>{\n      console.log(res.data)\n      this.resList = res.data\n    })\n\n  }\n  ,\n  data() {\n    return {\n      orderList:{},\n      order: [],\n\n      resList:{},\n\n      selectedDate:null,\n      aimedRes:0,\n      isActivate:'',\n    };\n  }\n};\n</script>\n"]}]}